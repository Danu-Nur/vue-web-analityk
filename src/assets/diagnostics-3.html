<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Diagnostics Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'DM Sans', sans-serif;
            background-color: #f9fafb;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(229, 231, 235, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .json-viewer {
            max-height: 300px;
            overflow-y: auto;
        }

        .event-log {
            max-height: 300px;
            overflow-y: auto;
        }

        .mini-chart {
            height: 120px;
        }

        .scrollbar-thin::-webkit-scrollbar {
            width: 4px;
            height: 4px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
    </style>
</head>

<body class="text-gray-900">
    <div class="container mx-auto px-4 py-6">
        <header class="mb-8">
            <h1 class="text-2xl font-bold">Analytics Diagnostics</h1>
            <p class="text-gray-600">Real-time tracking health monitoring and debugging</p>
        </header>

        <!-- Bento Grid Layout -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- API Key & Domain Check -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üîë</span> API Key & Domain Check
                    </h2>
                    <span
                        class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Active</span>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600">API Key Status</span>
                        <span
                            class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Valid</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600">Domain Match</span>
                        <span
                            class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Verified</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-600">Headers Check</span>
                        <span
                            class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Missing
                            Referrer</span>
                    </div>
                </div>
                <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Allowed Domains</label>
                    <div class="bg-gray-50 p-2 rounded text-sm font-mono overflow-x-auto">
                        analytics.example.com, app.example.com, staging.example.net
                    </div>
                </div>
            </div>

            <!-- Real-time Events Monitor -->
            <div class="card rounded-xl p-4 col-span-1 row-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üîÑ</span> Real-time Events
                    </h2>
                    <div class="flex items-center">
                        <span class="relative flex h-3 w-3 mr-2">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </span>
                        <span class="text-xs text-gray-500">Live</span>
                    </div>
                </div>
                <div class="event-log scrollbar-thin">
                    <div class="space-y-3">
                        <div class="border-l-2 border-green-500 pl-3 py-1">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">page_view</span>
                                <span class="text-gray-500">12:45:23.456</span>
                            </div>
                            <div class="text-xs text-gray-500">origin: https://example.com/products</div>
                        </div>
                        <div class="border-l-2 border-blue-500 pl-3 py-1">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">click</span>
                                <span class="text-gray-500">12:45:24.112</span>
                            </div>
                            <div class="text-xs text-gray-500">selector: #add-to-cart-btn</div>
                        </div>
                        <div class="border-l-2 border-purple-500 pl-3 py-1">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">scroll</span>
                                <span class="text-gray-500">12:45:25.789</span>
                            </div>
                            <div class="text-xs text-gray-500">position: 75%</div>
                        </div>
                        <div class="border-l-2 border-green-500 pl-3 py-1">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">page_view</span>
                                <span class="text-gray-500">12:45:26.001</span>
                            </div>
                            <div class="text-xs text-gray-500">origin: https://example.com/checkout</div>
                        </div>
                        <div class="border-l-2 border-yellow-500 pl-3 py-1">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">custom_event</span>
                                <span class="text-gray-500">12:45:27.332</span>
                            </div>
                            <div class="text-xs text-gray-500">type: newsletter_signup</div>
                        </div>
                    </div>
                </div>
                <div class="mt-3 text-xs text-gray-500">
                    Showing last 50 events. <button class="text-blue-600 hover:underline">View all</button>
                </div>
            </div>

            <!-- Tracking Session Health -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üß™</span> Session Health
                    </h2>
                    <span class="text-xs text-gray-500">Last 15 min</span>
                </div>
                <div class="grid grid-cols-3 gap-2 mb-4">
                    <div class="bg-gray-50 p-2 rounded text-center">
                        <div class="text-2xl font-bold">142</div>
                        <div class="text-xs text-gray-500">Active</div>
                    </div>
                    <div class="bg-gray-50 p-2 rounded text-center">
                        <div class="text-2xl font-bold">8</div>
                        <div class="text-xs text-gray-500">Suspicious</div>
                    </div>
                    <div class="bg-gray-50 p-2 rounded text-center">
                        <div class="text-2xl font-bold">3</div>
                        <div class="text-xs text-gray-500">Invalid</div>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="flex items-center justify-between text-sm">
                        <span>US Chrome Desktop</span>
                        <span class="font-medium">68</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>UK Safari Mobile</span>
                        <span class="font-medium">42</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>DE Firefox Desktop</span>
                        <span class="font-medium">19</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>FR Edge Desktop</span>
                        <span class="font-medium">13</span>
                    </div>
                </div>
            </div>

            <!-- Missing Events / Incomplete Funnel -->
            <div class="card rounded-xl p-4 col-span-1 lg:col-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">‚ö†Ô∏è</span> Funnel Drop-offs
                    </h2>
                    <div class="flex space-x-2">
                        <button class="text-xs px-2 py-1 bg-gray-100 rounded">Checkout</button>
                        <button class="text-xs px-2 py-1 bg-gray-100 rounded">Signup</button>
                    </div>
                </div>
                <div class="mini-chart mb-4">
                    <div class="flex h-full items-end space-x-1">
                        <div class="flex-1 bg-blue-500 rounded-t" style="height: 100%"></div>
                        <div class="flex-1 bg-blue-500 rounded-t" style="height: 78%"></div>
                        <div class="flex-1 bg-blue-500 rounded-t" style="height: 65%"></div>
                        <div class="flex-1 bg-blue-500 rounded-t" style="height: 42%"></div>
                        <div class="flex-1 bg-blue-500 rounded-t" style="height: 22%"></div>
                    </div>
                </div>
                <div class="grid grid-cols-5 text-center text-xs text-gray-500 mb-4">
                    <div>Landing</div>
                    <div>Product</div>
                    <div>Cart</div>
                    <div>Checkout</div>
                    <div>Purchase</div>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between text-sm">
                        <span>Users reached checkout but didn't complete</span>
                        <span class="font-medium text-red-500">58% drop-off</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>Added to cart but didn't proceed</span>
                        <span class="font-medium text-yellow-500">23% drop-off</span>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <span>Missing payment method event</span>
                        <span class="font-medium">142 sessions</span>
                    </div>
                </div>
            </div>

            <!-- Bot Detection Logs -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üß†</span> Bot Detection
                    </h2>
                    <span class="text-xs text-gray-500">Last hour</span>
                </div>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <span
                            class="bg-red-100 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Bot</span>
                        <div>
                            <div class="text-sm">UA: "Mozilla/5.0 (compatible; Googlebot/2.1)"</div>
                            <div class="text-xs text-gray-500">IP: 66.249.66.1 ‚Ä¢ 12:42:11</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span
                            class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Suspicious</span>
                        <div>
                            <div class="text-sm">Device mismatch: Mobile UA but Desktop res</div>
                            <div class="text-xs text-gray-500">IP: 185.143.223.12 ‚Ä¢ 12:38:45</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span
                            class="bg-red-100 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Bot</span>
                        <div>
                            <div class="text-sm">No JS support, rapid requests</div>
                            <div class="text-xs text-gray-500">IP: 89.234.157.132 ‚Ä¢ 12:35:22</div>
                        </div>
                    </div>
                </div>
                <button class="mt-3 text-xs text-blue-600 hover:underline">View all (14)</button>
            </div>

            <!-- Client Device Consistency -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üíª</span> Device Fingerprints
                    </h2>
                    <span class="text-xs text-gray-500">Issues</span>
                </div>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <span
                            class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Mismatch</span>
                        <div>
                            <div class="text-sm">Session ID: s_5f8d3a1b</div>
                            <div class="text-xs text-gray-500">Desktop ‚Üí Mobile ‚Üí Desktop</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span
                            class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Changed</span>
                        <div>
                            <div class="text-sm">Session ID: s_9e2c7f4d</div>
                            <div class="text-xs text-gray-500">Browser fingerprint changed mid-session</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span
                            class="bg-red-100 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full mr-2">Invalid</span>
                        <div>
                            <div class="text-sm">Session ID: s_3b6a9e1f</div>
                            <div class="text-xs text-gray-500">Empty device ID</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Raw Payload Inspector -->
            <div class="card rounded-xl p-4 col-span-1 lg:col-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üìú</span> Payload Inspector
                    </h2>
                    <div class="flex space-x-2">
                        <button class="text-xs px-2 py-1 bg-gray-100 rounded">Raw</button>
                        <button class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">Parsed</button>
                    </div>
                </div>
                <div class="json-viewer scrollbar-thin bg-gray-50 p-3 rounded text-sm font-mono">
                    <pre>{
  "event": "page_view",
  "timestamp": "2023-06-15T12:45:23.456Z",
  "properties": {
    "url": "https://example.com/products",
    "referrer": "https://google.com/search?q=example",
    "title": "Example Products",
    "path": "/products",
    "search": "",
    "width": 1440,
    "height": 900
  },
  "context": {
    "ip": "192.168.1.1",
    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)...",
    "locale": "en-US",
    "timezone": "America/New_York",
    "screen": {
      "width": 1440,
      "height": 900
    }
  },
  "session": {
    "id": "s_5f8d3a1b",
    "first_event": true,
    "referring_domain": "google.com"
  }
}</pre>
                </div>
                <div class="mt-3 flex justify-between items-center">
                    <span class="text-xs text-gray-500">Payload #3 of 10</span>
                    <button class="text-xs px-3 py-1 bg-gray-100 rounded flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                        </svg>
                        Copy
                    </button>
                </div>
            </div>

            <!-- Unverified Domains -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">üß≠</span> Unverified Domains
                    </h2>
                    <span class="text-xs text-gray-500">Last 24h</span>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm">test.example.org</div>
                            <div class="text-xs text-gray-500">12 events</div>
                        </div>
                        <span
                            class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Blocked</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm">dev.example.net</div>
                            <div class="text-xs text-gray-500">8 events</div>
                        </div>
                        <span
                            class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Warning</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm">localhost:3000</div>
                            <div class="text-xs text-gray-500">3 events</div>
                        </div>
                        <span
                            class="bg-gray-100 text-gray-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Ignored</span>
                    </div>
                </div>
            </div>

            <!-- Client-side Errors -->
            <div class="card rounded-xl p-4 col-span-1">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-lg flex items-center">
                        <span class="mr-2">‚ùå</span> JS Errors
                    </h2>
                    <span class="text-xs text-gray-500">Last hour</span>
                </div>
                <div class="space-y-3">
                    <div>
                        <div class="text-sm font-medium">TypeError: Cannot read property...</div>
                        <div class="text-xs text-gray-500">Chrome 112 ‚Ä¢ 42 occurrences</div>
                    </div>
                    <div>
                        <div class="text-sm font-medium">ReferenceError: tracker is not defined</div>
                        <div class="text-xs text-gray-500">Safari 15 ‚Ä¢ 18 occurrences</div>
                    </div>
                    <div>
                        <div class="text-sm font-medium">SyntaxError: Unexpected token '<'< /div>
                                <div class="text-xs text-gray-500">Firefox 108 ‚Ä¢ 7 occurrences</div>
                        </div>
                    </div>
                    <button class="mt-3 text-xs text-blue-600 hover:underline">View error details</button>
                </div>

                <!-- Latency & Delivery Logs -->
                <div class="card rounded-xl p-4 col-span-1">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="font-semibold text-lg flex items-center">
                            <span class="mr-2">‚è±Ô∏è</span> Delivery Latency
                        </h2>
                        <span class="text-xs text-gray-500">Avg: 142ms</span>
                    </div>
                    <div class="mini-chart mb-4">
                        <div class="flex h-full items-end space-x-1">
                            <div class="flex-1 bg-green-500 rounded-t" style="height: 30%"></div>
                            <div class="flex-1 bg-green-500 rounded-t" style="height: 45%"></div>
                            <div class="flex-1 bg-green-500 rounded-t" style="height: 60%"></div>
                            <div class="flex-1 bg-yellow-500 rounded-t" style="height: 85%"></div>
                            <div class="flex-1 bg-green-500 rounded-t" style="height: 50%"></div>
                            <div class="flex-1 bg-green-500 rounded-t" style="height: 40%"></div>
                            <div class="flex-1 bg-red-500 rounded-t" style="height: 95%"></div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span>Min latency</span>
                            <span class="font-medium">32ms</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span>Max latency</span>
                            <span class="font-medium text-red-500">412ms</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span>Failed deliveries</span>
                            <span class="font-medium">2</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Simple animation for the real-time events feed
            function animateEventFeed() {
                const eventLog = document.querySelector('.event-log');
                if (eventLog) {
                    setInterval(() => {
                        const events = [
                            { type: 'page_view', time: new Date().toLocaleTimeString() + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'), origin: 'https://example.com/' + ['products', 'blog', 'contact', 'about'][Math.floor(Math.random() * 4)] },
                            { type: 'click', time: new Date().toLocaleTimeString() + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'), selector: '#' + ['cta-button', 'nav-toggle', 'search-btn', 'subscribe'][Math.floor(Math.random() * 4)] },
                            { type: 'scroll', time: new Date().toLocaleTimeString() + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'), position: Math.floor(Math.random() * 100) + '%' },
                            { type: 'custom_event', time: new Date().toLocaleTimeString() + '.' + Math.floor(Math.random() * 1000).toString().padStart(3, '0'), name: ['newsletter_signup', 'video_play', 'form_submit', 'product_view'][Math.floor(Math.random() * 4)] }
                        ];

                        const event = events[Math.floor(Math.random() * events.length)];
                        const colors = {
                            'page_view': 'green',
                            'click': 'blue',
                            'scroll': 'purple',
                            'custom_event': 'yellow'
                        };

                        const eventElement = document.createElement('div');
                        eventElement.className = `border-l-2 border-${colors[event.type]}-500 pl-3 py-1`;
                        eventElement.innerHTML = `
                        <div class="flex justify-between text-sm">
                            <span class="font-medium">${event.type}</span>
                            <span class="text-gray-500">${event.time}</span>
                        </div>
                        <div class="text-xs text-gray-500">${event.origin || event.selector || 'position: ' + event.position || 'type: ' + event.name}</div>
                    `;

                        eventLog.insertBefore(eventElement, eventLog.firstChild);

                        // Keep only the last 10 events
                        if (eventLog.children.length > 10) {
                            eventLog.removeChild(eventLog.lastChild);
                        }
                    }, 3000);
                }
            }

            // Copy to clipboard functionality
            function setupCopyButtons() {
                document.querySelectorAll('button').forEach(button => {
                    if (button.textContent.includes('Copy')) {
                        button.addEventListener('click', () => {
                            const pre = button.closest('.card').querySelector('pre');
                            if (pre) {
                                navigator.clipboard.writeText(pre.textContent);
                                button.innerHTML = `
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                Copied!
                            `;
                                setTimeout(() => {
                                    button.innerHTML = `
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                                    </svg>
                                    Copy
                                `;
                                }, 2000);
                            }
                        });
                    }
                });
            }

            // Initialize when DOM is loaded
            document.addEventListener('DOMContentLoaded', () => {
                animateEventFeed();
                setupCopyButtons();
            });
        </script>
</body>

</html>